import Layout from 'lib/components/layout'
import { Spacer, Link } from '@geist-ui/react'

export const meta = {
  title: '如何写好JS2',
  date: '2020-11-13T09:31:10.165Z',
  description: '',
}

接上文,在<Link href="/posts/writeCode" color>如何写好 JS</Link>中我们聊到了基础的`javaScript`编码风格
,包括如何定义变量,函数,常量。本文将继续阐述关于`javaScript`的一些开发技巧。现在让我们回到本初,
思考改善代码的第一步,如何命名。

在阅读代码之初,编码的风格和命名会比抽象的方式,设计的技巧更吸引我们的眼球,因为前 2 者是直观的,我们可以通过
优秀的编码风格和命名推敲出作者的意图。很多时候阅读优秀的代码风格也会为我们自己的代码风格定下基调。
比如当你阅读一堆算法工程师写的代码块,常常会见到单字母变量,反复的声明,不知为何的拷贝与赋值,莫名其妙的条件判
等一系列奇形怪状的操作,我们不能说这个人写的有问题,因为他们写的代码确确实实能工作的,甚至在性能和空间上有足够
的优势，但这在工程,特别是大型工程中是不值得称道的。根据经验我们可以这类代码归类为 "糊屎",
充其量是 "糊" 了一滩高性能的 "屎"。

现在我们做的是脱离 "编程只不过是工具" 的阶段,脱离 "糊屎男孩",让工程拥有人性,充满智慧
使阅读者在某个瞬间切实地感受到创作者的思维热情与审美哲学。

<Spacer />

#### 1.减少不必要的魔术字符

魔术字符指的是代码中出现意义不明的字符,从上下文中无法推断他的具体来源与作用,
这会使代码增加冗余难以阅读,难以扩展。

<Spacer y={0.2} />

通常面对一些常量属性,我们可以把它定义在一个`public`文件中 方便统一管理,这样有利于代码的扩展和维护。

```js
//bad
const url = `${host}/admin/user`

//good
const Type = 'admin'
const api = {
  user: 'user',
  ...//more load
}
const url = `${host}/${Type}/${api.user}`
```

#### 2.避免过度优化

如果你不是编写类库,底层代码等对性能要求极为苛刻的工具时,请勿过度优化性能。绝大部分不必要的性能优化会使代码变得
晦涩,难以让旁人理解推敲其中的奥妙,或者时间长了导致自己忘记他到底是怎么运作的。

- 不必要的减少内存空间
- 不必要的运算优化

```js
这里演示的是不必要的内存开销
//bad
let val
array.foreach(user=>{
  val=array.first+...+array.end
  register(val)
})

//good

array.foreach(user=>{
  const val=array.first+...+array.end
  register(val)
})

// bad
let len = arr.length
for (i = 0; i < len; i++) {}

// good
arr.forEach((v) => {})

```

#### 3.观察与思考

观察一直是一个十分模糊的概念,可以尝试让周围的朋友同事阅读你的代码,问问他们的感受,哪些地方觉得有问题的,哪些逻辑觉得不够恰当的。
通过这种方式修改你的代码。个可学习的方式是在 `github `上阅读代码，你也能注意到开发者们情绪的波动与思维的跳跃，这里真的需要这些定义吗、
这里有必要写的这么短小吗?
试图理解开发者创作时想法是很自然的，这些情绪的波动能让你明白他们大约处于编程、人生、情感的什么状态，有助于你深刻的理解工程的设计。

举个例子,比如在我阅读*Vue 2.x*的文档时,我曾感叹到生命钩子的便利与文档的一应俱全,循序渐进。再到*React*中学习 hooks 钩子的时候,
比如我看到`useState,useEffect`的时候,
我就可以揣摩那么我剩下的`hooks`是不是都以 use 开头呢,结果验证了我的设想,同时合理的归类使得理解钩子变得平滑,通过合理的分类降低了学习者的心智负担。
后面在阅读`React 17.x`版本的源码时,我就能通过钩子遵循调用栈的调用去注意到功能的巧妙架构,理解创造者的意图也更加清晰了,
以及`React`官方团队对一些实验性的钩子部署
让我们能更好的观测到未来的方向 —— 这就是我们对程序的观察与思考。可是我曾听过也说过"狗是人类最忠诚的朋友,uniapp 的文档连狗都不如",
这也是一种观察结果,虽然让人不是那么的开心。

<Spacer y={3} />

export default ({ children }) => <Layout meta={meta}>{children}</Layout>
