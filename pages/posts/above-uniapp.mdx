import Layout from 'lib/components/Layout'
import Highlight, { defaultProps } from 'prism-react-renderer'
import { Spacer } from '@geist-ui/react'

export const meta = {
  date: '2020-10-24T16:25:30.406Z',
  title: '随谈uni-app.1',
  description: '',
}

`uni-app`是一个使用 Vue.js(2.x)开发的所有前端应用的跨端框架。
相比于传统的开发方案`NativeApp`有着周期和快速开发的优势。但是不乏有过多的坑。

由于`uni-app`的跨端特性。导致很多时候开发者需要按照文档所说的一样作为一个遵守游戏规则的玩家。
那么,遵守了规则带来的代价是什么呢?----_花费更多的头发_。

<Spacer />

### 1.首先我们看一段跨端兼容代码。

```js
// #ifdef  %PLATFORM%
平台特有的API实现
// #endif
...
```

从上面一个跨端的条件编译来看,如果我们要做到多端兼容就需要 多个平台的`#ifdef #endif`。
是十分不方便的。而且考虑到不同平台例如小程序和 App。这 2 个平台的特点是无法操作 DOM。包括你使用*refs*(WX 小程序)
还有一些 CSS 层级的问题,不同平台下的兼容都是你需要考虑的。这点带来的代价只有花费更多的头发。

### 2.混乱的路由 Pages.json

`uni-app`采用的是小程序式的设计把路由的处理交到了一个全局的*pages.json*文件。通过*pages.json*配置全局页面

```json
{
  "path": "pages/index/index",
  "style": {
    "navigationBarTitleText": "XXX",
    "navigationStyle": "default",
    "mp-alipay": {
      "titleNView": {
        "titleText": "XXX"
      }
    }
  }
}
```

相比传统 vue 全家桶系列`vue-router`的文件结构。pages.json 显得臃肿混乱不堪。
通过配置全局`global`的 tabbar 限制了开发者自定义 tabbar(使用 nvue 不在讨论范围)
可能有人会想到 `uni-app`的第三方路由库`simple-uni-router`。这是一个按照`vue-router`
标准来的路由库。可是对平台的兼容性也不容乐观。加上还是需要在`pages.json`进行导入路径。
并没有带来实质上的减负。

### 3.文档的分散性

使用`uni-app`开发 3 个月左右带来的直观感受.社区缺乏优秀的 UI 库 并且 文档相关性不大。社区活跃度和官方的回馈不成正比。
我觉得小公司或者外包公司短平快的周期可能更倾向于这个框架。但是带来的隐患是后期绝对想不到的。
开发者需要自行寻找自己业务上的解决方案。

export default ({ children }) => <Layout meta={meta}>{children}</Layout>
